// ============================================================
// Inventory Kanban Count — Styles
// Scoped under .o_inventory_kanban_count to avoid bleeding
// ============================================================

// Tokens
$brand:       #4B35D4;
$brand-lt:    #EBE8FC;
$brand2:      #7B63F5;
$success:     #059669;
$success-lt:  #D1FAE5;
$warn:        #D97706;
$warn-lt:     #FEF3C7;
$danger:      #DC2626;
$danger-lt:   #FEE2E2;
$ink:         #16142E;
$muted:       #7A778F;
$muted2:      #AEABC4;
$line:        #E2E0EF;
$bg:          #F0EFF8;

// ── Layout ──────────────────────────────────────────────────

.o_inventory_kanban_count {
    background: $bg !important;

    // Header progress bar injected above the board
    .o_inv_progress_bar_wrap {
        padding: 10px 16px 6px;
        border-bottom: 1px solid $line;
        background: white;

        .o_inv_pb_row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            font-size: 12px;
            font-weight: 600;
            color: $muted;

            .o_inv_pb_pct { color: $brand; font-weight: 700; }
        }

        .o_inv_pb_track {
            height: 5px;
            background: $line;
            border-radius: 99px;
            overflow: hidden;

            .o_inv_pb_fill {
                height: 100%;
                background: linear-gradient(90deg, $brand, $brand2);
                border-radius: 99px;
                transition: width .6s ease;
            }
        }
    }

    // Column headers
    .o_inv_col_headers {
        display: grid;
        grid-template-columns: 1fr 1fr;
        padding: 10px 14px 4px;
        gap: 10px;

        .o_inv_col_hdr {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: .5px;
            color: $muted;

            &.done { color: $success; }

            .o_inv_hdr_dot {
                width: 7px;
                height: 7px;
                border-radius: 50%;
                background: $muted2;

                &.done { background: $success; }
            }

            .o_inv_hdr_badge {
                margin-left: auto;
                background: $line;
                color: $muted;
                font-size: 10px;
                padding: 1px 7px;
                border-radius: 99px;
                font-weight: 700;

                &.done { background: $success-lt; color: $success; }
            }
        }
    }

    // Two-column board
    .o_inv_board {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0;
        padding: 0 10px 20px;
        overflow-y: auto;
        flex: 1;

        .o_inv_col {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 6px 4px;
            overflow-y: auto;
            max-height: 100%;
        }
    }
}

// ── Kanban card ──────────────────────────────────────────────

.o_inv_kcard {
    background: white;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(22,20,46,.08), 0 0 1px rgba(22,20,46,.04);
    overflow: hidden;
    transition: box-shadow .15s, transform .15s;
    cursor: pointer;
    animation: o_inv_card_in .28s cubic-bezier(.4,0,.2,1) both;

    @keyframes o_inv_card_in {
        from { opacity: 0; transform: translateY(10px) scale(.96); }
        to   { opacity: 1; transform: none; }
    }

    &:hover { box-shadow: 0 6px 20px rgba(22,20,46,.13); }
    &.is-counted { background: #F0FDF6; }

    .o_inv_kcard_stripe {
        height: 3px;
        width: 100%;

        &.stripe-pending { background: $line; }
        &.stripe-match   { background: $success; }
        &.stripe-over    { background: $danger; }
        &.stripe-short   { background: $warn; }
    }

    .o_inv_kcard_body {
        padding: 10px 12px 10px;
    }

    .o_inv_kcard_cat_row { margin-bottom: 4px; }
    .o_inv_kcard_cat {
        font-size: 9px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: .6px;
        color: $brand;
    }

    .o_inv_kcard_name {
        font-size: 13px;
        font-weight: 700;
        color: $ink;
        line-height: 1.25;
        margin-bottom: 5px;
    }

    .o_inv_kcard_loc {
        font-size: 10px;
        color: $muted2;
        margin-bottom: 8px;

        i { margin-right: 3px; font-size: 10px; }
    }

    // Expected row
    .o_inv_kcard_expected_row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: $bg;
        border-radius: 7px;
        padding: 5px 8px;
        margin-bottom: 8px;

        .o_inv_expected_lbl { font-size: 10px; color: $muted2; }
        .o_inv_expected_val {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: 600;
            color: $ink;
        }
        .o_inv_uom { color: $muted2; font-size: 10px; }
    }

    // Count input field
    .o_inv_count_field {
        width: 100%;
        background: $bg;
        border: 1.5px solid $line;
        border-radius: 9px;
        padding: 7px 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        transition: border-color .15s, background .15s, box-shadow .15s;
        min-height: 38px;

        &:hover { border-color: $muted2; }

        &.is-counted {
            background: $success-lt;
            border-color: transparent;

            .o_inv_cf_value { color: $success; }
        }

        .o_inv_cf_value {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: 700;
            color: $ink;
        }
        .o_inv_cf_placeholder {
            font-size: 12px;
            color: $muted2;
        }
        .o_inv_cf_icon, .o_inv_cf_edit_icon {
            color: $muted2;
            font-size: 13px;
        }
        .o_inv_cf_edit_icon { color: $success; }
    }

    // Status row
    .o_inv_kcard_status_row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 7px;
    }

    .o_inv_status_chip {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: 10px;
        font-weight: 700;
        padding: 2px 8px;
        border-radius: 99px;

        .o_inv_sdot {
            width: 5px; height: 5px;
            border-radius: 50%;
        }

        &.chip-pending { background: $line; color: $muted;
            .o_inv_sdot { background: $muted2; } }
        &.chip-match   { background: $success-lt; color: $success;
            .o_inv_sdot { background: $success; } }
        &.chip-over    { background: $danger-lt; color: $danger;
            .o_inv_sdot { background: $danger; } }
        &.chip-short   { background: $warn-lt; color: $warn;
            .o_inv_sdot { background: $warn; } }
    }

    .o_inv_match_btn {
        font-size: 10px;
        font-weight: 700;
        color: $success;
        background: $success-lt;
        border: none;
        border-radius: 6px;
        padding: 3px 9px;
        cursor: pointer;
        transition: background .15s;

        &:hover { background: darken($success-lt, 5%); }
    }
}

// ── Numpad Drawer ────────────────────────────────────────────

.o_inv_backdrop {
    position: fixed;
    inset: 0;
    background: rgba(22,20,46,.4);
    z-index: 1040;
    opacity: 0;
    pointer-events: none;
    transition: opacity .3s;

    &.open { opacity: 1; pointer-events: all; }
}

.o_inv_drawer {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: white;
    border-radius: 22px 22px 0 0;
    box-shadow: 0 -4px 40px rgba(22,20,46,.18);
    z-index: 1050;
    transform: translateY(100%);
    transition: transform .32s cubic-bezier(.4,0,.2,1);
    max-width: 480px;
    margin: 0 auto;

    &.open { transform: translateY(0); }

    .o_inv_drawer_handle {
        display: flex;
        justify-content: center;
        padding: 12px 0 4px;

        .o_handle_bar {
            width: 36px; height: 4px;
            background: $line;
            border-radius: 99px;
        }
    }

    .o_inv_drawer_product {
        padding: 4px 18px 12px;
        border-bottom: 1px solid $line;
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 10px;

        .o_inv_dp_cat {
            font-size: 10px;
            font-weight: 700;
            color: $brand;
            text-transform: uppercase;
            letter-spacing: .5px;
            margin-bottom: 2px;
        }
        .o_inv_dp_name {
            font-size: 16px;
            font-weight: 700;
            color: $ink;
            line-height: 1.2;
        }
        .o_inv_dp_loc {
            font-size: 12px;
            color: $muted2;
            margin-top: 2px;
        }
    }

    .o_inv_drawer_close {
        width: 28px; height: 28px;
        border-radius: 8px;
        background: $bg;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        color: $muted;
        font-size: 14px;

        &:hover { background: $line; }
    }

    // Display area
    .o_inv_drawer_display {
        padding: 10px 18px 8px;
        display: flex;
        align-items: flex-end;
        gap: 12px;

        .o_inv_dd_main { flex: 1; }

        .o_inv_dd_label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: .5px;
            color: $muted2;
            margin-bottom: 4px;
        }

        .o_inv_dd_value {
            font-family: 'Courier New', monospace;
            font-size: 38px;
            font-weight: 700;
            color: $ink;
            line-height: 1;
            display: flex;
            align-items: center;

            &.empty { color: $muted2; font-size: 24px; font-family: inherit; font-weight: 400; }

            .o_inv_dd_unit { font-size: 14px; color: $muted2; margin-left: 5px; font-family: inherit; font-weight: 400; }
            .o_inv_dd_placeholder { font-size: 22px; color: $muted2; font-family: inherit; font-weight: 400; }
            .o_inv_dd_cursor {
                display: inline-block;
                width: 3px; height: 32px;
                background: $brand;
                border-radius: 2px;
                margin-left: 4px;
                animation: o_inv_blink .7s ease infinite;
                @keyframes o_inv_blink { 0%,100%{opacity:1} 50%{opacity:0} }
            }
        }

        .o_inv_dd_side {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
            padding-bottom: 4px;
        }

        .o_inv_dd_exp {
            text-align: right;
            .o_inv_dd_exp_label { font-size: 9px; color: $muted2; font-weight: 600; text-transform: uppercase; }
            .o_inv_dd_exp_val { font-family: 'Courier New', monospace; font-size: 13px; font-weight: 600; color: $ink; }
        }

        .o_inv_dd_diff {
            background: $bg;
            border-radius: 7px;
            padding: 4px 9px;
            text-align: right;
            .o_inv_dd_diff_label { font-size: 9px; color: $muted2; font-weight: 600; text-transform: uppercase; }
            .o_inv_dd_diff_val {
                font-family: 'Courier New', monospace;
                font-size: 14px; font-weight: 700;
                margin-top: 1px;
                &.pos  { color: $warn; }
                &.neg  { color: $danger; }
                &.zero { color: $success; }
                &.none { color: $muted2; }
            }
        }
    }

    // Quick set
    .o_inv_quickset_row {
        display: flex;
        gap: 6px;
        padding: 4px 18px 8px;
        flex-wrap: wrap;

        .o_inv_qs {
            padding: 5px 12px;
            border-radius: 8px;
            border: 1.5px solid $line;
            background: white;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: 600;
            color: $ink;
            cursor: pointer;
            transition: all .12s;

            &:active { transform: scale(.92); }
            &:hover  { border-color: $brand; color: $brand; }

            &.match {
                background: $success-lt;
                color: $success;
                border-color: transparent;
                font-family: inherit;

                &:hover { background: darken($success-lt, 4%); }
            }
            &.clear { color: $muted; }
        }
    }

    // Numpad
    .o_inv_numpad_grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 7px;
        padding: 6px 16px 8px;

        .o_inv_nk {
            height: 54px;
            border-radius: 12px;
            background: $bg;
            border: none;
            font-family: 'Courier New', monospace;
            font-size: 22px;
            font-weight: 600;
            color: $ink;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background .1s, transform .08s;
            box-shadow: 0 1px 3px rgba(22,20,46,.06);

            &:active { transform: scale(.88); background: $line; }
            &.o_inv_nk_dot { font-size: 28px; color: $muted; }
            &.o_inv_nk_del { color: $muted; font-size: 16px; }
        }
    }

    // Action buttons
    .o_inv_drawer_actions {
        display: grid;
        grid-template-columns: 1fr 2.5fr;
        gap: 8px;
        padding: 4px 16px 28px;

        .o_inv_act_skip {
            height: 50px;
            border-radius: 13px;
            border: 2px solid $line;
            background: white;
            font-size: 13px;
            font-weight: 700;
            color: $muted;
            cursor: pointer;
            transition: all .15s;

            i { margin-right: 4px; }
            &:hover { border-color: $muted; color: $ink; }
        }

        .o_inv_act_confirm {
            height: 50px;
            border-radius: 13px;
            border: none;
            background: linear-gradient(135deg, $brand, $brand2);
            color: white;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(75,53,212,.35);
            transition: all .15s;

            i { margin-right: 6px; }
            &:hover { box-shadow: 0 6px 28px rgba(75,53,212,.5); }
            &:active { transform: scale(.96); }

            &.disabled {
                background: $line;
                color: $muted2;
                box-shadow: none;
                cursor: not-allowed;
            }
        }
    }
}
